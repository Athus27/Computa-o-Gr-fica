<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Run Sprite</title>
<style>
  body{
    margin:0;
    height:100vh;
    display:grid;
    place-items:center;
    background:#0f0f12;
  }
  canvas{
    border:1px solid #333;
    background:#0b0b0f;
    image-rendering: pixelated;
  }
</style>
</head>
<body>

<canvas id="game" width="900" height="400"></canvas>

<script>
/* ========= CONFIGURAÇÃO SIMPLES E FIXA ========= */
/* Ajustada para NÃO quebrar */

const SPRITE_SRC = "run.png";

/* Seu PNG: 1536 x 1024
   Frames organizados em 8 COLUNAS x 1 LINHA */
const TOTAL_FRAMES = 8;
const COLS = 8;
const ROWS = 1;

const FRAME_W = 1536 / COLS; // 192
const FRAME_H = 1024 / ROWS; // 1024

const SCALE = 0.35;
const FPS = 10;

/* ============================================== */

const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
ctx.imageSmoothingEnabled = false;

const sprite = new Image();
sprite.src = SPRITE_SRC;

let frame = 0;
let last = 0;

let x = 50;
const speed = 180;
const groundY = 330;

function loop(t){
  if(!last) last = t;
  const dt = (t - last) / 1000;
  last = t;

  ctx.clearRect(0,0,canvas.width,canvas.height);

  // chão
  ctx.fillStyle = "#222";
  ctx.fillRect(0, groundY + 6, canvas.width, 4);

  if(t % (1000 / FPS) < 16){
    frame = (frame + 1) % TOTAL_FRAMES;
  }

  x += speed * dt;
  if(x > canvas.width) x = -FRAME_W * SCALE;

  const sx = frame * FRAME_W;
  const sy = 0;

  const dw = FRAME_W * SCALE;
  const dh = FRAME_H * SCALE;

  const drawY = groundY - dh + 40; // ajuste fino vertical

  ctx.drawImage(
    sprite,
    sx, sy, FRAME_W, FRAME_H,
    x, drawY, dw, dh
  );

  requestAnimationFrame(loop);
}

sprite.onload = () => requestAnimationFrame(loop);
</script>

</body>
</html>
